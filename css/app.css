/* FILE: css/app.css */
/* =========================================================
   TalisPod v0.78 UI微調整
   - カムバック位置は index 側で調整済
   - タブ絵文字表示対応（.icoサイズ強化）
   - 最悪環境に「暗い絵文字パラパラ」用アニメ追加
   ========================================================= */

:root{
  --bg: #0b0d14;
  --panel: rgba(255,255,255,0.06);
  --panel2: rgba(255,255,255,0.08);
  --text: rgba(255,255,255,0.92);
  --muted: rgba(255,255,255,0.65);
  --line: rgba(255,255,255,0.12);

  --safeTop: env(safe-area-inset-top, 0px);
  --safeBottom: env(safe-area-inset-bottom, 0px);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }

body{
  margin:0;
  font-family: system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", sans-serif;
  color: var(--text);
  background: radial-gradient(1200px 800px at 50% 0%, rgba(120,160,255,0.12), transparent 60%),
              radial-gradient(900px 700px at 80% 20%, rgba(255,120,180,0.10), transparent 55%),
              var(--bg);
}

/* ===== Header ===== */
.header{
  position: sticky;
  top: 0;
  z-index: 40;
  padding-top: var(--safeTop);
  backdrop-filter: blur(10px);
  background: rgba(10,12,18,0.62);
  border-bottom: 1px solid var(--line);
}
.header-inner{
  width: min(860px, 94vw);
  margin: 0 auto;
  padding: 10px 0 8px;
}
.header-title{
  font-weight: 800;
  letter-spacing: 0.02em;
  margin-bottom: 6px;
}
.header-lines .line{
  font-size: 12px;
  color: var(--muted);
  line-height: 1.3;
}
#comebackBtn{
  padding: 8px 12px;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,0.12);
  cursor:pointer;
  white-space:nowrap;
}
#comebackBtn:hover{
  background: rgba(255,255,255,0.18);
}

/* ===== Scene ===== */
.scene{
  position: relative;
  overflow: hidden;
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: 16px;
  padding: 14px;
}

/* ===== Tabs ===== */
.tabs{
  position: fixed;
  left:0;
  right:0;
  bottom:0;
  z-index:50;
  display:flex;
  justify-content:center;
  gap:8px;
  padding:10px 10px calc(10px + var(--safeBottom));
  background: rgba(10,12,18,0.72);
  backdrop-filter: blur(10px);
  border-top: 1px solid var(--line);
}
.tab-btn{
  width: min(160px, 22vw);
  display:flex;
  flex-direction: column;
  align-items:center;
  justify-content:center;
  gap:4px;
  padding:10px 6px;
  border-radius:16px;
  background: rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.12);
}
.tab-btn .ico{
  font-size: 18px;   /* ★絵文字が見やすいように */
  line-height: 1;
}
.tab-btn .dot{
  width:6px;
  height:6px;
  border-radius:999px;
  opacity:0;
  background: rgba(255,255,255,0.85);
}
.tab-btn.active{
  background: rgba(255,255,255,0.16);
}
.tab-btn.active .dot{
  opacity:1;
}

/* ===== 最悪環境 追加パラパラ演出 ===== */
.tsp-darkfall{
  position:absolute;
  pointer-events:none;
  user-select:none;
  z-index:2;
  animation: tspDarkFall var(--tspDur,2s) linear forwards;
  opacity:0.9;
  filter: brightness(0.6) saturate(0.7);
}

@keyframes tspDarkFall{
  0%{
    transform: translate3d(0,-10px,0) rotate(0deg);
    opacity:0;
  }
  10%{ opacity:0.9; }
  100%{
    transform: translate3d(var(--tspDX,0px), var(--tspDY,220px), 0) rotate(12deg);
    opacity:0;
  }
}

/* ===== 既存bad暗化効果 ===== */
.scene.fx-bad{
  filter: brightness(0.75) saturate(0.7);
}

/* ===== 未リボーン制御 ===== */
body.unreborn .tabs{
  display:none !important;
}
body.unreborn #comebackBtn{
  display:none !important;
}
